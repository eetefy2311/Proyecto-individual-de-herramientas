"0","#Temperatura promedio en relación con el blanqueamiento de arrecifes"
"0","base.filtrada <- base.filtrada %>%"
"0","  mutate(temp.cel = Temperature_Mean - 273.15)"
"0",""
"0","plt4 <- base.filtrada %>% "
"0","  ggplot(aes(x = temp.cel, y = Percent_Bleaching)) +"
"0","  stat_density_2d(aes(fill = after_stat(level)), geom = ""polygon"", alpha = 0.9, color = NA) +"
"0","  scale_fill_viridis_c(option = ""magma"", direction = -1, name = ""Densidad de puntos"") +"
"0","  labs("
"0","    title = ""Relación entre la temperatura promedio y el blanqueamiento coralino (2000–2020)"","
"0","    x = ""Temperatura promedio (°C)"","
"0","    y = ""Porcentaje de blanqueamiento (%)"""
"0","  ) +"
"0","  theme_minimal() +"
"0","  theme("
"0","    plot.title = element_text(hjust = 0.2, size = 11),"
"0","    plot.margin = margin(t = 20, r = 20, b = 20, l = 20)"
"0","  )"
"0",""
"0","ggsave(here(""res"", ""temp_mapa.pdf""), plt4, width = 6, height = 4)"
"0",""
"0","#Anomalías térmicas por región en relación con el blanqueamiento de los arrecifes"
"0","library(ggrepel)"
"0","ssta.ecoreg <- base.filtrada %>%"
"0","  group_by(Ecoregion_Name) %>%"
"0","  summarise("
"0","    prom.blanq = mean(Percent_Bleaching, na.rm = TRUE),"
"0","    max.ssta = mean(SSTA_Maximum, na.rm = TRUE)"
"0","  ) %>%"
"0","  arrange(desc(max.ssta))"
"0",""
"0","plt5 <- ssta.ecoreg %>% "
"0","  ggplot(aes(x = max.ssta, y = prom.blanq, label = Ecoregion_Name)) +"
"0","  geom_point(color = ""#E53935"", size = 3, alpha = 0.8) +"
"0","  geom_smooth(method = ""lm"", se = TRUE, color = ""#1E88E5"", linewidth = 1) +"
"0","  ggrepel::geom_text_repel(size = 3, color = ""gray20"", max.overlaps = 10) + "
"0","  labs("
"0","    title = ""Relación entre anomalías térmicas (SSTA máxima) y blanqueamiento por ecorregión"","
"0","    x = ""Anomalía máxima de temperatura superficial (°C)"","
"0","    y = ""Porcentaje promedio de blanqueamiento (%)"""
"0","  ) +"
"0","  theme_minimal(base_size = 12) +"
"0","  theme("
"0","    plot.title = element_text(hjust = 0.4, size = 10),"
"0","    plot.subtitle = element_text(hjust = 0.5, size = 9, color = ""gray30""),"
"0","    plot.margin = margin(t = 15, r = 15, b = 15, l = 15)"
"0","  )"
"0",""
"0","ggsave(here(""res"", ""anomalias.pdf""), plt5, width = 6, height = 4)"
